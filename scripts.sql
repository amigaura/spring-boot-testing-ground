Hibernate:
    create table app_user_roles (
        app_user_id bigint not null,
        role_id bigint not null,
        primary key (app_user_id, role_id)
    )
Hibernate:
    create table user_role_permissions (
        role_id bigint not null,
        permission_id bigint
    )
Hibernate:
    create table zb_app_user (
        id bigint generated by default as identity,
        password varchar(255) not null,
        username varchar(255) not null,
        user_detail_id bigint,
        primary key (id)
    )
Hibernate:
    create table zb_permission (
        permission_id bigint generated by default as identity,
        created_by varchar(255),
        created_date timestamp(6),
        last_updated timestamp(6),
        last_updated_by varchar(255),
        permission_created_by_user_id bigint,
        permission_created_date timestamp(6),
        permission_description varchar(255),
        permission_name varchar(255),
        primary key (permission_id)
    )
Hibernate:
    create table zb_user_detail (
        id bigint generated by default as identity,
        aadhar_number varchar(255),
        alternate_email varchar(255),
        alternate_email2 varchar(255),
        alternate_email3 varchar(255),
        alternate_email_verified boolean,
        alternate_phone varchar(255),
        alternate_phone2 varchar(255),
        alternate_phone3 varchar(255),
        alternate_phone_verified boolean,
        blood_group varchar(255),
        club_membership boolean,
        club_membership_details varchar(255),
        created_by varchar(255),
        created_date timestamp(6),
        date_of_birth date,
        default_property_id bigint,
        driving_license_number varchar(255),
        email varchar(255),
        email_verified boolean,
        emergency_contact_address varchar(255),
        emergency_contact_address_verified boolean,
        emergency_contact_email varchar(255),
        emergency_contact_email_verified boolean,
        emergency_contact_name varchar(255),
        emergency_contact_phone varchar(255),
        emergency_contact_phone_verified boolean,
        emergency_contact_relationship varchar(255),
        gender varchar(255),
        last_updated timestamp(6),
        last_updated_by varchar(255),
        marital_status varchar(255),
        name varchar(255),
        occupation varchar(255),
        pan_number varchar(255),
        passport_number varchar(255),
        pets boolean,
        pets_details varchar(255),
        phone_number varchar(255),
        phone_verified boolean,
        profile_picture varchar(255),
        profile_picture_url varchar(255),
        residing_from_date date,
        username varchar(255),
        voter_id_number varchar(255),
        primary key (id)
    )
Hibernate:
    create table zb_user_role (
        role_id bigint generated by default as identity,
        created_by varchar(255),
        created_by_user_id bigint,
        created_date timestamp(6),
        description varchar(255),
        last_updated timestamp(6),
        last_updated_by varchar(255),
        name varchar(255),
        primary key (role_id)
    )
Hibernate:
    alter table if exists zb_app_user
       drop constraint if exists UKflixt0rstgsyuyobcphy3f65d
2025-06-17T15:37:58.041+05:30  WARN 34349 --- [           main] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Warning Code: 0, SQLState: 00000
2025-06-17T15:37:58.042+05:30  WARN 34349 --- [           main] o.h.engine.jdbc.spi.SqlExceptionHelper   : constraint "ukflixt0rstgsyuyobcphy3f65d" of relation "zb_app_user" does not exist, skipping
Hibernate:
    alter table if exists zb_app_user
       add constraint UKflixt0rstgsyuyobcphy3f65d unique (username)
Hibernate:
    alter table if exists zb_app_user
       drop constraint if exists UKbkxlnfjd7nep56ugexbidtssq
2025-06-17T15:37:58.043+05:30  WARN 34349 --- [           main] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Warning Code: 0, SQLState: 00000
2025-06-17T15:37:58.043+05:30  WARN 34349 --- [           main] o.h.engine.jdbc.spi.SqlExceptionHelper   : constraint "ukbkxlnfjd7nep56ugexbidtssq" of relation "zb_app_user" does not exist, skipping
Hibernate:
    alter table if exists zb_app_user
       add constraint UKbkxlnfjd7nep56ugexbidtssq unique (user_detail_id)
Hibernate:
    alter table if exists zb_user_detail
       drop constraint if exists UKkclldbxujsdq0if0j2cnrbs4b
2025-06-17T15:37:58.044+05:30  WARN 34349 --- [           main] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Warning Code: 0, SQLState: 00000
2025-06-17T15:37:58.044+05:30  WARN 34349 --- [           main] o.h.engine.jdbc.spi.SqlExceptionHelper   : constraint "ukkclldbxujsdq0if0j2cnrbs4b" of relation "zb_user_detail" does not exist, skipping
Hibernate:
    alter table if exists zb_user_detail
       add constraint UKkclldbxujsdq0if0j2cnrbs4b unique (email)
Hibernate:
    alter table if exists zb_user_detail
       drop constraint if exists UK5elamtmb3pgdodf4dgugnlthj
2025-06-17T15:37:58.045+05:30  WARN 34349 --- [           main] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Warning Code: 0, SQLState: 00000
2025-06-17T15:37:58.045+05:30  WARN 34349 --- [           main] o.h.engine.jdbc.spi.SqlExceptionHelper   : constraint "uk5elamtmb3pgdodf4dgugnlthj" of relation "zb_user_detail" does not exist, skipping
Hibernate:
    alter table if exists zb_user_detail
       add constraint UK5elamtmb3pgdodf4dgugnlthj unique (username)
Hibernate:
    alter table if exists app_user_roles
       add constraint FKk94rp3a0r3b6fl8pi8t2wstsv
       foreign key (role_id)
       references zb_user_role
Hibernate:
    alter table if exists app_user_roles
       add constraint FKrf012gm654u0yebv04jeo5da4
       foreign key (app_user_id)
       references zb_app_user
Hibernate:
    alter table if exists user_role_permissions
       add constraint FKr0htpy8fkshgulj4o5pbpkeq3
       foreign key (role_id)
       references zb_user_role
Hibernate:
    alter table if exists zb_app_user
       add constraint FKkw9bemqlswfbblcx8xdgi2g5p
       foreign key (user_detail_id)
       references zb_user_detail

 select * from app_user
 select * from role
select * from app_user_roles

-- Roles
INSERT INTO user_role (name) VALUES ('ADMIN'), ('USER'), ('GUEST');

-- Users
INSERT INTO user_detail (
    name, username, email, email_verified, phone_verified, occupation, alternate_email, alternate_phone,
    alternate_phone_verified, alternate_email_verified, alternate_phone2, alternate_email2, alternate_phone3,
    alternate_email3, emergency_contact_name, emergency_contact_phone, emergency_contact_relationship,
    emergency_contact_email, emergency_contact_address, emergency_contact_phone_verified,
    emergency_contact_email_verified, emergency_contact_address_verified, phone_number, date_of_birth,
    profile_picture, profile_picture_url, residing_from_date, gender, marital_status, blood_group,
    default_property_id, pets, pets_details, aadhar_number, pan_number, passport_number, driving_license_number,
    voter_id_number, club_membership, club_membership_details, last_updated, last_updated_by, created_by, created_date
) VALUES
('Alice Smith', 'alice', 'alice@example.com', true, true, 'Engineer', 'alice.alt@example.com', '1234567890', true, true, NULL, NULL, NULL, NULL, 'Bob Smith', '0987654321', 'Brother', 'bob@example.com', '123 Main St', true, true, true, '1234567890', '1990-01-01', NULL, NULL, '2020-01-01', 'Female', 'Single', 'A+', 1, false, NULL, '123412341234', 'ABCDE1234F', 'N1234567', 'DL123456', 'V1234567', false, NULL, NOW(), 'admin', 'admin', NOW()),
('Bob Johnson', 'bobby', 'bob@example.com', false, true, 'Doctor', 'bob.alt@example.com', '2345678901', false, false, NULL, NULL, NULL, NULL, 'Alice Johnson', '1234567890', 'Sister', 'alice@example.com', '456 Elm St', false, false, false, '2345678901', '1985-05-15', NULL, NULL, '2019-05-15', 'Male', 'Married', 'B+', 2, true, 'Dog', '567856785678', 'FGHIJ5678K', 'N7654321', 'DL654321', 'V7654321', true, 'Golf Club', NOW(), 'admin', 'admin', NOW()),
('Charlie Lee', 'charlie', 'charlie@example.com', true, false, 'Teacher', 'charlie.alt@example.com', '3456789012', true, false, NULL, NULL, NULL, NULL, 'David Lee', '2345678901', 'Father', 'david@example.com', '789 Oak St', true, false, true, '3456789012', '1992-03-10', NULL, NULL, '2021-03-10', 'Male', 'Single', 'O-', 3, false, NULL, '234523452345', 'KLMNO2345P', 'N2345678', 'DL234567', 'V2345678', false, NULL, NOW(), 'admin', 'admin', NOW()),
('Diana King', 'diana', 'diana@example.com', true, true, 'Artist', 'diana.alt@example.com', '4567890123', true, true, NULL, NULL, NULL, NULL, 'Eve King', '3456789012', 'Mother', 'eve@example.com', '321 Pine St', true, true, true, '4567890123', '1988-07-22', NULL, NULL, '2018-07-22', 'Female', 'Married', 'AB+', 4, true, 'Cat', '345634563456', 'PQRST3456U', 'N3456789', 'DL345678', 'V3456789', true, 'Art Club', NOW(), 'admin', 'admin', NOW()),
('Ethan Brown', 'ethan', 'ethan@example.com', false, false, 'Lawyer', 'ethan.alt@example.com', '5678901234', false, false, NULL, NULL, NULL, NULL, 'Fiona Brown', '4567890123', 'Wife', 'fiona@example.com', '654 Cedar St', false, false, false, '5678901234', '1995-11-30', NULL, NULL, '2022-11-30', 'Male', 'Single', 'A-', 5, false, NULL, '456745674567', 'UVWXY4567Z', 'N4567890', 'DL456789', 'V4567890', false, NULL, NOW(), 'admin', 'admin', NOW()),
('Fiona White', 'fiona', 'fiona@example.com', true, true, 'Nurse', 'fiona.alt@example.com', '6789012345', true, true, NULL, NULL, NULL, NULL, 'George White', '5678901234', 'Husband', 'george@example.com', '987 Maple St', true, true, true, '6789012345', '1993-09-18', NULL, NULL, '2023-09-18', 'Female', 'Married', 'B-', 6, true, 'Parrot', '567856785678', 'ZABCD6789E', 'N5678901', 'DL567890', 'V5678901', true, 'Book Club', NOW(), 'admin', 'admin', NOW()),
('George Black', 'george', 'george@example.com', false, true, 'Chef', 'george.alt@example.com', '7890123456', false, true, NULL, NULL, NULL, NULL, 'Hannah Black', '6789012345', 'Daughter', 'hannah@example.com', '159 Spruce St', false, true, false, '7890123456', '1980-12-12', NULL, NULL, '2017-12-12', 'Male', 'Married', 'O+', 7, false, NULL, '678967896789', 'CDEFG7890H', 'N6789012', 'DL678901', 'V6789012', false, NULL, NOW(), 'admin', 'admin', NOW()),
('Hannah Green', 'hannah', 'hannah@example.com', true, false, 'Designer', 'hannah.alt@example.com', '8901234567', true, false, NULL, NULL, NULL, NULL, 'Ian Green', '7890123456', 'Son', 'ian@example.com', '753 Willow St', true, false, true, '8901234567', '1998-04-25', NULL, NULL, '2024-04-25', 'Female', 'Single', 'AB-', 8, true, 'Rabbit', '789078907890', 'HIJKL8901M', 'N7890123', 'DL789012', 'V7890123', true, 'Dance Club', NOW(), 'admin', 'admin', NOW()),
('Ian Blue', 'ian', 'ian@example.com', false, false, 'Writer', 'ian.alt@example.com', '9012345678', false, false, NULL, NULL, NULL, NULL, 'Jane Blue', '8901234567', 'Mother', 'jane@example.com', '852 Birch St', false, false, false, '9012345678', '1987-06-05', NULL, NULL, '2016-06-05', 'Male', 'Married', 'A+', 9, false, NULL, '890189018901', 'MNOPQ9012R', 'N8901234', 'DL890123', 'V8901234', false, NULL, NOW(), 'admin', 'admin', NOW()),
('Jane Red', 'jane', 'jane@example.com', true, true, 'Scientist', 'jane.alt@example.com', '0123456789', true, true, NULL, NULL, NULL, NULL, 'Kyle Red', '9012345678', 'Father', 'kyle@example.com', '951 Aspen St', true, true, true, '0123456789', '1991-02-14', NULL, NULL, '2015-02-14', 'Female', 'Single', 'B+', 10, true, 'Fish', '901290129012', 'RSTUV0123W', 'N9012345', 'DL901234', 'V9012345', true, 'Science Club', NOW(), 'admin', 'admin', NOW());

-- Permissions
INSERT INTO permission (
    permission_id, permission_name, permission_description, permission_created_by_user_id,
    permission_created_date, last_updated, last_updated_by, created_by, created_date
) VALUES
(1, 'Community', 'Permission for Community', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(2, 'Noticeboard', 'Permission for Noticeboard', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(3, 'Complaint Box', 'Permission for Complaint Box', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(4, 'Complaint Category', 'Permission for Complaint Category', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(5, 'Repository', 'Permission for Repository', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(6, 'Vendor', 'Permission for Vendor', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(7, 'Accounting', 'Permission for Accounting', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(8, 'Utility Billing', 'Permission for Utility Billing', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(9, 'Action Item', 'Permission for Action Item', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(10, 'Facility Booking', 'Permission for Facility Booking', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(11, 'Vehicle', 'Permission for Vehicle', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(12, 'Asset', 'Permission for Asset', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(13, 'Notification', 'Permission for Notification', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(14, 'Service Staff', 'Permission for Service Staff', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(15, 'Data Entry Operator', 'Permission for Data Entry Operator', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(16, 'Auditor', 'Permission for Auditor', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(17, 'Security Front Office', 'Permission for Security Front Office', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(18, 'Poll', 'Permission for Poll', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(19, 'Accounting Assistant', 'Permission for Accounting Assistant', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(20, 'Staff', 'Permission for Staff', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(21, 'Request Approver', 'Permission for Request Approver', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(22, 'User Management', 'Permission for User Management', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(23, 'Request Box', 'Permission for Request Box', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(24, 'Request Box Assistant', 'Permission for Request Box Assistant', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(25, 'Forum', 'Permission for Forum', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(26, 'Wiki Publisher', 'Permission for Wiki Publisher', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(27, 'Wiki Author', 'Permission for Wiki Author', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(28, 'User Management Assistant', 'Permission for User Management Assistant', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(29, 'Water Tanker', 'Permission for Water Tanker', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(30, 'Security Supervisor', 'Permission for Security Supervisor', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(31, 'PR Requester', 'Permission for PR Requester', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(32, 'Financial Reports Viewer', 'Permission for Financial Reports Viewer', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(33, 'Complaint Field Staff', 'Permission for Complaint Field Staff', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(34, 'Asset Operator', 'Permission for Asset Operator', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(35, 'Store Coordinator', 'Permission for Store Coordinator', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(36, 'Facility Booking Assistant', 'Permission for Facility Booking Assistant', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(37, 'Security Guard', 'Permission for Security Guard', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(38, 'CRM', 'Permission for CRM', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(39, 'Incident Reporting', 'Permission for Incident Reporting', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(40, 'Incident Reporting Field Staff', 'Permission for Incident Reporting Field Staff', 1, NOW(), NOW(), 'admin', 'admin', NOW()),
(41, 'Incident Reporting Category Admin', 'Permission for Incident Reporting Category Admin', 1, NOW(), NOW(), 'admin', 'admin', NOW());

-- Roles
INSERT INTO user_role (
    role_id, name, description, created_by_user_id, created_date, created_by, last_updated, last_updated_by
) VALUES
(1, 'Admin', 'Administrator role', 1, NOW(), 'admin', NOW(), 'admin'),
(2, 'Manager', 'Manager role', 1, NOW(), 'admin', NOW(), 'admin'),
(3, 'Resident', 'Resident user role', 1, NOW(), 'admin', NOW(), 'admin'),
(4, 'Security', 'Security staff role', 1, NOW(), 'admin', NOW(), 'admin'),
(5, 'Auditor', 'Auditor role', 1, NOW(), 'admin', NOW(), 'admin'),
(6, 'Staff', 'General staff role', 1, NOW(), 'admin', NOW(), 'admin'),
(7, 'Vendor', 'Vendor role', 1, NOW(), 'admin', NOW(), 'admin'),
(8, 'Accountant', 'Accounting staff role', 1, NOW(), 'admin', NOW(), 'admin'),
(9, 'Operator', 'Operator role', 1, NOW(), 'admin', NOW(), 'admin'),
(10, 'Assistant', 'Assistant role', 1, NOW(), 'admin', NOW(), 'admin');

-- Assigning permissions to roles
INSERT INTO user_role_permissions (role_id, permission_id) VALUES
(1, 1), (1, 2), (1, 3), (1, 22), -- Admin
(2, 1), (2, 4), (2, 5), (2, 22), -- Manager
(3, 1), (3, 10), (3, 23),        -- Resident
(4, 17), (4, 30), (4, 37),       -- Security
(5, 16), (5, 32),                -- Auditor
(6, 20), (6, 14),                -- Staff
(7, 6), (7, 38),                 -- Vendor
(8, 7), (8, 19),                 -- Accountant
(9, 34), (9, 35),                -- Operator
(10, 24), (10, 36);              -- Assistant

-- App User
INSERT INTO app_user (
    id, user_detail_id, username, password
) VALUES
(1, 1, 'alice', 'password1'),
(2, 2, 'bobby', 'password2'),
(3, 3, 'charlie', 'password3'),
(4, 4, 'diana', 'password4'),
(5, 5, 'ethan', 'password5'),
(6, 6, 'fiona', 'password6'),
(7, 7, 'george', 'password7'),
(8, 8, 'hannah', 'password8'),
(9, 9, 'ian', 'password9'),
(10, 10, 'jane', 'password10');


-- app user and role mapping
 insert into app_user_roles values(1,1)
 insert into app_user_roles values(1,3);

 -- Update role names to match the new naming convention
 update user_role set name = 'ADMIN' where name = 'Admin';commit;

